<app-user-snippet></app-user-snippet>

<div class="relative top-[160px] md:top-[125px] mx-20 pb-[45px]">
    @if(isCatLoading &&
    isSubLoading &&
    isPostLoading) {
    <div class="text-orange w-full flex justify-center">
        <app-loading></app-loading>
    </div>
    }

    @for(categorie of allCategories; track categorie) {
    <div class="w-full">
        <div class="w-full bg-blue rounded px-4 py-2 mb-[24px] text-white-base hover:bg-white-base hover:text-blue">
            <a routerLink="/forum/categorie/{{categorie.c_id}}" class="text-2xl font-revalia">
                {{categorie.c_title}}
            </a>

            <i class="text-xs">(les 5 derniers sujets actifs sont affich√©s)</i>
        </div>
        @for(subject of linkedSubjects; track subject) {
        @if(categorie.c_id === subject.s_categorie_id) {
        <div
            class="w-9/10 flex flex-wrap justify-between bg-orange text-white-base hover:bg-white-base hover:text-orange rounded-sm mx-auto my-1 px-2 py-1 last:mb-[40px] font-revalia">
            <a routerLink="/forum/subject/{{subject.s_id}}">
                {{subject.s_title}}
            </a>

            <span class="font-helvetica">
                Dernier message :
                @if(subject.lastPost) {
                {{subject.lastPost.p_date | date:'dd/MM/yyyy, HH:mm'}}
                }
            </span>
        </div>
        }
        }
    </div>
    }
</div>