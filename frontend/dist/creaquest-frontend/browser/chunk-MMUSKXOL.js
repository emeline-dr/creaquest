import{a as U,b as z}from"./chunk-3BA7FMGK.js";import{a as L}from"./chunk-OUIXM5MW.js";import{a as M,b as P,c as I,e as R,f as A,j as E}from"./chunk-AGUO72EF.js";import{$a as p,Ia as c,Mb as k,Oa as x,Sa as l,Ta as o,Ua as d,Va as C,Wa as _,Xa as b,Y as h,_a as w,eb as u,fa as v,ga as g,gb as S,mb as y,va as m,w as f,ya as n,za as s}from"./chunk-NTXE5QSV.js";function D(i,t){i&1&&d(0,"img",10)(1,"div",11)}function T(i,t){i&1&&(l(0,"a",7),u(1," Panneau d'administration "),o())}function B(i,t){if(i&1){let e=C();c(0,D,2,0),l(1,"div",0)(2,"button",1)(3,"span",2),d(4,"img",3),u(5),o(),d(6,"img",4),o(),l(7,"div",5)(8,"a",6),u(9," Modifier le profil "),o(),c(10,T,2,0,"a",7),l(11,"a",8),_("click",function(){v(e);let a=b();return g(a.logout())}),u(12," Se d\xE9connecter "),o()(),d(13,"img",9),o()}if(i&2){let e=b();x(e.isBackgroundCustom?0:-1),n(4),w("src",e.userMedal,m),n(),S(" ",e.userProfile.u_username," "),n(),p("src","assets/images/",e.userProfile.u_avatar,"",m),p("alt","Avatar de ",e.userProfile.u_username,""),n(4),x(e.userProfile.u_role==="admin"?10:-1),n(3),p("src","assets/images/",e.userProfile.u_avatar,"",m),p("alt","Avatar de ",e.userProfile.u_username,"")}}var j=class i{constructor(t,e,r,a){this.authService=t;this.dataService=e;this.router=r;this.activatedRoute=a}isLoading=!0;userProfile;pageCo=!1;isBackgroundCustom=!1;userMedal="";medalLevels=[{max:5,medal:"Medal-Default"},{max:10,medal:"Medal-Bronze"},{max:15,medal:"Medal-Silver"},{max:20,medal:"Medal-Gold"}];ngOnInit(){this.router.events.pipe(f(t=>t instanceof M||t instanceof P)).subscribe(()=>{this.getLastChild(this.activatedRoute).snapshot.routeConfig?.component===L||this.router.url==="/home"||this.router.url==="/login"||this.router.url==="/register"||this.router.url==="/login?registration=success"?this.pageCo=!0:this.pageCo=!1}),this.dataService.getUser().subscribe({next:t=>{this.userProfile=t;let e=this.userProfile.u_lvl,r="Medal-Diamond";for(let a of this.medalLevels)if(e<a.max){r=a.medal;break}this.userMedal=`assets/images/medals/${r}.png`,this.isLoading=!1},error:t=>console.error("Erreur lors de la r\xE9cup\xE9ration du profil",t)})}getLastChild(t){for(;t.firstChild;)t=t.firstChild;return t}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||i)(s(U),s(z),s(R),s(I))};static \u0275cmp=h({type:i,selectors:[["app-user-snippet"]],standalone:!0,features:[y],decls:1,vars:1,consts:[[1,"hs-dropdown","relative"],["id","hs-dropdown-profile",1,"absolute","end-0","md:end-[100px]","bg-orange","hs-dropdown-open:bg-blue","font-revalia","text-white","base","rounded-bl","md:text-4xl","p-0","w-[100px]","h-[100px]","md:h-auto","md:w-auto","md:px-15","md:py-5"],[1,"hidden","md:block"],["alt","M\xE9daille",1,"size-[50px]","inline",3,"src"],[1,"md:hidden","absolute","end-[-5px]","top-[-5px]","object-cover","rounded","size-[100px]",3,"src","alt"],["role","menu","aria-labelledby","hs-dropdown-unstyled",1,"hs-dropdown-menu","transition-[opacity,margin]","duration","hs-dropdown-open:opacity-100","opacity-0","w-56","hidden","z-10","mt-2","min-w-60","rounded"],["tabindex","0","routerLink","/profile",1,"block","m-[15px]","py-[15px]","bg-blue","text-white-base","text-2xl","text-center","rounded","border-2","border-white-base","transition","duration-450","hover:bg-white-base","hover:text-blue"],["tabindex","0","routerLink","/administration",1,"block","m-[15px]","py-[15px]","bg-blue","text-white-base","text-2xl","text-center","rounded","border-2","border-white-base","transition","duration-450","hover:bg-white-base","hover:text-blue"],["tabindex","0",1,"block","mx-[15px]","mb-[15px]","py-[15px]","bg-blue","text-white-base","text-2xl","text-center","rounded","border-2","border-white-base","transition","duration-450","hover:bg-white-base","hover:text-blue",3,"click"],[1,"hidden","md:block","absolute","end-[-26px]","top-[-26px]","object-cover","rounded-full","size-[150px]","border-5","border-orange","hs-dropdown-open:border-blue",3,"src","alt"],["src","assets/images/backgrounds/Background-Steampunk.jpg","alt","",1,"fixed","absolute","top-0","w-full","h-full","z-[-2]","object-cover","blur-xs","opacity-50"],[1,"fixed","absolute","top-0","w-full","h-full","z-[-1]","bg-blue-dark-95"]],template:function(e,r){e&1&&c(0,B,14,12,"div",0),e&2&&x(r.pageCo?-1:0)},dependencies:[k,E,A],styles:[".hs-dropdown-menu[_ngcontent-%COMP%]{inset:95px 120px auto auto!important;background-color:#171c2d80}@media (max-width: 768px){.hs-dropdown-menu[_ngcontent-%COMP%]{inset:95px 15px auto auto!important}}"]})};export{j as a};
