import{a as O}from"./chunk-TA72PURZ.js";import{b as W,c as Q}from"./chunk-ZXDUXUS2.js";import{a as B}from"./chunk-4MHKQR7U.js";import{a as z}from"./chunk-MMUSKXOL.js";import{f as V,h as A,o as H}from"./chunk-3M5UH2B5.js";import"./chunk-3BA7FMGK.js";import"./chunk-YVT3WIWJ.js";import"./chunk-OUIXM5MW.js";import"./chunk-P74D5YH2.js";import{c as F,e as D}from"./chunk-AGUO72EF.js";import{$a as f,Ia as h,La as w,Lb as N,Oa as x,Pa as S,Qa as _,Ra as j,Sa as s,Ta as o,Ua as q,Va as C,Wa as y,Xa as u,Y as v,eb as a,fa as m,fb as I,ga as d,gb as p,ib as P,jb as E,kb as M,mb as R,ob as L,pb as T,ua as k,va as g,ya as i,za as b}from"./chunk-NTXE5QSV.js";import"./chunk-GAL4ENT6.js";function G(r,l){r&1&&(s(0,"div",1),q(1,"app-loading"),o())}function J(r,l){if(r&1&&(s(0,"div",3)(1,"div",7)(2,"div",8),a(3),o(),q(4,"img",9),o(),s(5,"div",10)(6,"div",11),a(7),L(8,"date"),o(),q(9,"p",12),o()()),r&2){let e=l.$implicit;i(3),p(" ",e.author_username," "),i(),f("src","assets/images/",e.author_avatar,"",g),f("alt","Avatar de ",e.author_username,""),i(3),p(" ",T(8,7,e.p_date,"dd/MM/yyyy, HH:mm")," "),i(2),w("innerHTML",e.p_content,k)}}function K(r,l){if(r&1){let e=C();s(0,"h1"),a(1),o(),s(2,"h2",2),a(3),o(),_(4,J,10,10,"div",3,S),s(6,"div",4)(7,"quill-editor",5),M("ngModelChange",function(n){m(e);let c=u();return E(c.newPostContent,n)||(c.newPostContent=n),d(n)}),o(),s(8,"button",6),y("click",function(){m(e);let n=u();return d(n.sendPost())}),a(9,"Envoyer le message"),o()()}if(r&2){let e=u();i(),I(e.categoryName),i(2),p(" ",e.currentSubject.s_title,""),i(),j(e.postsInSubject),i(3),P("ngModel",e.newPostContent),w("placeholder","Votre message...")}}var U=class r{constructor(l,e,t){this.activatedRoute=l;this.router=e;this.forumService=t}categoryName;id_subject;currentSubject;postsInSubject;subjectResponse;postsResponse;newPostContent="";isSubLoading=!0;isPostLoading=!0;ngOnInit(){let l=this.router.getCurrentNavigation();this.categoryName=l?.extras?.state?.categoryName,this.activatedRoute.params.subscribe(e=>{this.id_subject=+e.id,this.forumService.getAllSubjects().subscribe({next:t=>{this.subjectResponse=t,this.currentSubject=this.subjectResponse.find(n=>n.s_id===this.id_subject),this.isSubLoading=!1},error:t=>console.error("Erreur lors de la r\xE9cup\xE9ration du sujet",t)}),this.forumService.getPostsBySubjectId(this.id_subject).subscribe({next:t=>{this.postsInSubject=t.sort((n,c)=>new Date(n.p_date).getTime()-new Date(c.p_date).getTime()),this.isPostLoading=!1},error:t=>console.error("Erreur lors de la r\xE9cup\xE9ration des posts",t)})})}sendPost(){if(this.newPostContent.trim()===""){console.error("Le contenu du message est vide");return}this.forumService.addPost({subjectId:this.id_subject,content:this.newPostContent}).subscribe({next:l=>{console.log("Post ajout\xE9 :",l),this.newPostContent="",window.location.reload()},error:l=>console.error("Erreur lors de l'ajout du post",l)})}static \u0275fac=function(e){return new(e||r)(b(F),b(D),b(O))};static \u0275cmp=v({type:r,selectors:[["app-single-subject"]],standalone:!0,features:[R],decls:4,vars:1,consts:[[1,"relative","flex","flex-wrap","justify-center","top-[160px]","md:top-[125px]","mx-20","pb-[45px]"],[1,"text-orange","w-full","flex","justify-center"],[1,"block","w-full","text-center","border-b-1","border-b-white-base","font-revalia","text-white-base","text-[36px]","mb-[32px]"],[1,"w-full","flex","flex-wrap","justify-between","mb-[24px]"],[1,"w-full","md:w-3/4"],[1,"w-full","h-[200px]","my-[16px]",3,"ngModelChange","ngModel","placeholder"],[1,"btn","btn-orange","w-full","mt-[16px]",3,"click"],[1,"w-1/4"],[1,"w-4/5","text-center","font-revalia","bg-orange","text-white-base","text-lg","mx-auto","rounded-sm"],[1,"rounded-full","outline","outline-3","outline-orange","mt-[32px]","size-[160px]","mx-auto",3,"src","alt"],[1,"w-3/4"],[1,"w-full","bg-orange","text-white-base","rounded","px-1","mb-1"],[1,"w-full","bg-white-base","text-md","p-2","rounded",3,"innerHTML"]],template:function(e,t){e&1&&(q(0,"app-user-snippet"),s(1,"div",0),h(2,G,2,0,"div",1)(3,K,10,4),o()),e&2&&(i(2),x(t.isPostLoading&&t.isSubLoading?2:3))},dependencies:[Q,W,N,H,V,A,B,z],styles:[".ql-toolbar.ql-snow{border:0px;background:var(--color-orange);margin-bottom:8px;border-radius:5px}  .ql-snow .ql-stroke{stroke:var(--color-white-base)}  .ql-snow .ql-fill,   .ql-snow .ql-stroke.ql-fill{fill:var(--color-white-base)}  .ql-snow.ql-toolbar button:hover .ql-stroke,   .ql-snow .ql-toolbar button:hover .ql-stroke,   .ql-snow.ql-toolbar button:focus .ql-stroke,   .ql-snow .ql-toolbar button:focus .ql-stroke,   .ql-snow.ql-toolbar button.ql-active .ql-stroke,   .ql-snow .ql-toolbar button.ql-active .ql-stroke,   .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,   .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,   .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,   .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,   .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,   .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,   .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,   .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,   .ql-snow.ql-toolbar button:hover .ql-stroke-miter,   .ql-snow .ql-toolbar button:hover .ql-stroke-miter,   .ql-snow.ql-toolbar button:focus .ql-stroke-miter,   .ql-snow .ql-toolbar button:focus .ql-stroke-miter,   .ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,   .ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,   .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,   .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,   .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,   .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,   .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,   .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,   .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,   .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter{stroke:var(--color-blue)}  .ql-snow.ql-toolbar button:hover .ql-fill,   .ql-snow .ql-toolbar button:hover .ql-fill,   .ql-snow.ql-toolbar button:focus .ql-fill,   .ql-snow .ql-toolbar button:focus .ql-fill,   .ql-snow.ql-toolbar button.ql-active .ql-fill,   .ql-snow .ql-toolbar button.ql-active .ql-fill,   .ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,   .ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,   .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,   .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,   .ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,   .ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,   .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,   .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,   .ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,   .ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,   .ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,   .ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,   .ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,   .ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,   .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,   .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,   .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,   .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,   .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,   .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,   .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,   .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill{fill:var(--color-blue)}  .ql-container.ql-snow{border:2px solid var(--color-white-base);border-radius:3px;background:var(--color-blue);color:var(--color-white-base)}  .ql-toolbar.ql-snow+.ql-container.ql-snow{border-top:2px solid var(--color-white-base)}"]})};export{U as SingleSubjectComponent};
