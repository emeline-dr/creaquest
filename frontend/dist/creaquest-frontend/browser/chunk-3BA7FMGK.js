import{e as c}from"./chunk-AGUO72EF.js";import{P as n,Pb as u,U as a}from"./chunk-NTXE5QSV.js";var s=class extends Error{};s.prototype.name="InvalidTokenError";function g(i){return decodeURIComponent(atob(i).replace(/(.)/g,(t,e)=>{let r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function b(i){let t=i.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return g(t)}catch{return atob(t)}}function l(i,t){if(typeof i!="string")throw new s("Invalid token specified: must be a string");t||(t={});let e=t.header===!0?0:1,r=i.split(".")[e];if(typeof r!="string")throw new s(`Invalid token specified: missing part #${e+1}`);let h;try{h=b(r)}catch(p){throw new s(`Invalid token specified: invalid base64 for part #${e+1} (${p.message})`)}try{return JSON.parse(h)}catch(p){throw new s(`Invalid token specified: invalid json for part #${e+1} (${p.message})`)}}var o=class i{constructor(t){this.router=t}tokenKey="token";getAuthToken(){return localStorage.getItem(this.tokenKey)}logout(){localStorage.removeItem(this.tokenKey),this.router.navigate(["/home"])}getDecodedToken(){let t=this.getAuthToken();return t?l(t):null}getUserId(){let t=this.getDecodedToken();return t?t.user_id:null}static \u0275fac=function(e){return new(e||i)(a(c))};static \u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})};var d=class i{constructor(t,e){this.http=t;this.authService=e}apiUrl="https://creaquest-back.up.railway.app/";apiRoute="";login(t){return this.apiRoute="login",this.http.post(this.apiUrl+this.apiRoute,t)}register(t){return this.apiRoute="register",this.http.post(this.apiUrl+this.apiRoute,t)}getAllUsers(){return this.apiRoute="users",this.http.get(this.apiUrl+this.apiRoute)}getUser(){this.apiRoute="users/";let t=this.authService.getUserId();return this.http.get(this.apiUrl+this.apiRoute+t)}getWritingTasks(){this.apiRoute="tasks/writing/";let t=this.authService.getUserId();return this.http.get(this.apiUrl+this.apiRoute+t)}getCompletedWritingTasks(){this.apiRoute="completed-tasks/writing/";let t=this.authService.getUserId();return this.http.get(this.apiUrl+this.apiRoute+t)}validateWritingTasks(t,e){return this.apiRoute=`tasks/validation/writing/${t}/${e}`,this.http.post(this.apiUrl+this.apiRoute,{})}getReadingTasks(){this.apiRoute="tasks/reading/";let t=this.authService.getUserId();return this.http.get(this.apiUrl+this.apiRoute+t)}getCompletedReadingTasks(){this.apiRoute="completed-tasks/reading/";let t=this.authService.getUserId();return this.http.get(this.apiUrl+this.apiRoute+t)}validateReadingTasks(t,e){return this.apiRoute=`tasks/validation/reading/${t}/${e}`,this.http.post(this.apiUrl+this.apiRoute,{})}getDrawingTasks(){this.apiRoute="tasks/drawing/";let t=this.authService.getUserId();return this.http.get(this.apiUrl+this.apiRoute+t)}getCompletedDrawingTasks(){this.apiRoute="completed-tasks/drawing/";let t=this.authService.getUserId();return this.http.get(this.apiUrl+this.apiRoute+t)}validateDrawingTasks(t,e){return this.apiRoute=`tasks/validation/drawing/${t}/${e}`,this.http.post(this.apiUrl+this.apiRoute,{})}getMusic(){return this.apiRoute="music",this.http.get(this.apiUrl+this.apiRoute)}static \u0275fac=function(e){return new(e||i)(a(u),a(o))};static \u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})};export{o as a,d as b};
