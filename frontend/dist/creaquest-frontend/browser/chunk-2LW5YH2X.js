import{b as T,c as z,e as v,f as N,g as R,i as q,j,k as A,l as D,n as G,p as O}from"./chunk-3M5UH2B5.js";import{b as Q}from"./chunk-3BA7FMGK.js";import{w as P,x as M}from"./chunk-YVT3WIWJ.js";import{a as B}from"./chunk-P74D5YH2.js";import{c as L,f as F,j as V}from"./chunk-AGUO72EF.js";import{Ia as c,Kb as y,La as u,Mb as I,Oa as g,Sa as e,Sb as k,Ta as n,Ua as l,Va as h,Wa as x,Y as w,bb as S,cb as _,db as C,eb as a,fa as f,ga as b,mb as E,ya as m,za as p}from"./chunk-NTXE5QSV.js";import"./chunk-GAL4ENT6.js";var H=["passwordInput"];function J(r,o){r&1&&(e(0,"div",10),a(1," Identifiant et/ou mot de passe incorrect(s). "),n())}function K(r,o){r&1&&(e(0,"div",11),a(1," Votre inscription est r\xE9ussie ! Vous pouvez maintenant vous connecter. "),n())}function W(r,o){r&1&&(e(0,"div",15),a(1," Le champ doit \xEAtre compl\xE9t\xE9. "),n())}function X(r,o){r&1&&(e(0,"div",15),a(1," Le champ doit \xEAtre compl\xE9t\xE9. "),n())}function Y(r,o){r&1&&l(0,"i-lucide",27),r&2&&u("size",35)}function Z(r,o){r&1&&l(0,"i-lucide",28),r&2&&u("size",35)}var U=class r{constructor(o,s,t,i){this.activeRoute=o;this.titleService=s;this.fb=t;this.dataService=i;this.titleService.setTitle("Cr\xE9aquest - Se connecter"),this.loginForm=this.fb.group({username:["",v.required],password:["",v.required],rememberMe:[!1]})}loginForm;loginError=!1;registrationSuccess=!1;passwordInput;isPasswordVisible=!1;isPasswordInvisible=!0;ngOnInit(){this.activeRoute.queryParams.subscribe(t=>{t.registration==="success"&&(this.registrationSuccess=!0)});let o=localStorage.getItem("username"),s=localStorage.getItem("password");o&&s&&this.loginForm.patchValue({username:o,password:s,rememberMe:!0})}login(){if(this.loginForm.valid){let{username:o,password:s,rememberMe:t}=this.loginForm.value;this.dataService.login({username:o,password:s}).subscribe(i=>{i.status==="success"?(localStorage.setItem("token",i.token),t?(localStorage.setItem("username",o),localStorage.setItem("password",s)):(localStorage.removeItem("username"),localStorage.removeItem("password")),window.location.href="#/index"):(console.error("Erreur de connexion :",i.message),this.loginError=!0)},i=>{console.error("Erreur :",i)})}}viewPassword(){this.isPasswordVisible=!this.isPasswordVisible,this.isPasswordInvisible=!this.isPasswordInvisible,this.passwordInput&&(this.passwordInput.nativeElement.type=this.isPasswordVisible?"text":"password")}static \u0275fac=function(s){return new(s||r)(p(L),p(k),p(G),p(Q))};static \u0275cmp=w({type:r,selectors:[["app-login"]],viewQuery:function(s,t){if(s&1&&S(H,5),s&2){let i;_(i=C())&&(t.passwordInput=i.first)}},standalone:!0,features:[E],decls:42,vars:7,consts:[["passwordInput",""],["src","assets/images/Crea-Login.jpg","alt","Background Login",1,"hidden","md:block","w-1/2","h-screen","object-cover","mx-auto"],[1,"loginGradient","w-full","h-screen","absolute","top-0","left-0","content-center"],[1,"w-11/12","lg:w-3/5","mx-auto"],[1,"hidden","md:inline-flex","w-1/2","flex-wrap","align-center","justify-center"],[1,"font-revalia","text-white-base","text-[32px]"],[1,"w-3/4","mx-auto","mt-[25px]","p-[15px]","bg-orange","rounded-sm","text-white-base","text-xs"],["routerLink","/register",1,"underline","text-sm"],[1,"w-full","md:w-1/2","md:border-s","md:border-s-1","md:border-s-orange","inline-block","py-[75px]"],[1,"font-revalia","text-[32px]","text-white-base","text-center","pb-[50px]","underline"],[1,"w-3/4","mx-auto","rounded","p-3","mb-2","bg-rose-600","text-center","text-white-base"],[1,"w-3/4","mx-auto","rounded","p-3","mb-2","bg-green-600","text-center","text-white-base"],[1,"w-3/4","mx-auto","flex","justify-center","flex-wrap",3,"submit","formGroup"],[1,"contactFormulaire","relative","w-full","bg-blue","rounded","p-[15px]","text-white-base","text-xs"],["for","username",1,"mt-[10px]","font-bold","text-base"],[1,"bg-rose-600","rounded","text-xs","text-center"],["formControlName","username","name","username","id","username","type","text","placeholder","Entrez votre nom d'utilisateur","required","",1,"w-full","mt-[10px]","mb-[15px]","px-[15px]","py-[10px]","text-base","text-black","rounded-sm","border","border-1","border-blue-dark","bg-white-base"],["for","password",1,"font-bold","text-base"],["formControlName","password","name","password","id","password","type","password","placeholder","Entrez votre mot de passe","required","",1,"w-full","mt-[10px]","mb-[15px]","px-[15px]","py-[10px]","text-base","text-black","rounded-sm","border","border-1","border-blue-dark","bg-white-base"],[1,"password-eye","flex","absolute","bottom-[22%]","right-[8%]",3,"click"],["name","Eye","class","text-orange",3,"size",4,"ngIf"],["name","EyeOff","class","text-orange",3,"size",4,"ngIf"],["type","checkbox","name","rememberMe","id","rememberMe","formControlName","rememberMe",1,"accent-orange","me-[10px]"],["for","rememberMe"],["routerLink","/register",1,"md:hidden","w-11/12","text-xs","underline","text-white-base","mt-[5px]"],["type","submit",1,"btn","btn-orange","w-full","mt-[5px]","md:mt-[25px]"],["routerLink","/forgot-password",1,"w-11/12","opacity-75","text-xs","underline","text-white-base","mt-[5px]","text-end"],["name","Eye",1,"text-orange",3,"size"],["name","EyeOff",1,"text-orange",3,"size"]],template:function(s,t){if(s&1){let i=h();e(0,"div"),l(1,"img",1),e(2,"div",2),l(3,"app-title-creaquest"),e(4,"div",3)(5,"div",4)(6,"h2",5),a(7,"Pas de compte ?"),n(),e(8,"p",6),a(9," N'ayez crainte ! Il n'est pas trop tard pour rejoindre le reste de la communaut\xE9 dans cette aventure. "),l(10,"br")(11,"br"),e(12,"a",7),a(13,"Rejoignez la qu\xEAte d\xE8s maintenant !"),n()()(),e(14,"div",8)(15,"h2",9),a(16,"Se connecter"),n(),c(17,J,2,0,"div",10)(18,K,2,0,"div",11),e(19,"form",12),x("submit",function(){return f(i),b(t.login())}),e(20,"div",13)(21,"label",14),a(22,"Nom d'utilisateur"),n(),c(23,W,2,0,"div",15),l(24,"input",16),e(25,"label",17),a(26,"Mot de passe"),n(),c(27,X,2,0,"div",15),l(28,"input",18,0),e(30,"div",19),x("click",function(){return f(i),b(t.viewPassword())}),c(31,Y,1,1,"i-lucide",20)(32,Z,1,1,"i-lucide",21),n(),l(33,"input",22),e(34,"label",23),a(35,"Se souvenir de moi"),n()(),e(36,"a",24),a(37," Vous n'avez pas de compte ? "),n(),e(38,"button",25),a(39,"Se connecter"),n(),e(40,"a",26),a(41," Identifiant(s) oubli\xE9(s) ? "),n()()()()()()}if(s&2){let i,d;m(17),g(t.loginError==!0?17:-1),m(),g(t.registrationSuccess?18:-1),m(),u("formGroup",t.loginForm),m(4),g((i=t.loginForm.get("username"))!=null&&i.invalid&&((i=t.loginForm.get("username"))!=null&&i.touched)?23:-1),m(4),g((d=t.loginForm.get("password"))!=null&&d.invalid&&((d=t.loginForm.get("password"))!=null&&d.touched)?27:-1),m(4),u("ngIf",t.isPasswordVisible),m(),u("ngIf",t.isPasswordInvisible)}},dependencies:[V,F,M,P,I,y,O,q,z,T,N,R,D,j,A,B],styles:[".loginGradient[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--color-blue-dark) 0%,var(--color-blue-dark) 25%,color-mix(in srgb,var(--color-blue-dark),transparent 80%) 50%,var(--color-blue-dark) 75%,var(--color-blue-dark) 100%)}h2[_ngcontent-%COMP%]{text-shadow:0 0 5px var(--color-black)}.btn[_ngcontent-%COMP%]{font-size:16px}"]})};export{U as LoginComponent};
